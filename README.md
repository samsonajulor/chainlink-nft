# Chain Link NFT

# ProtoRandomNFT Contract README

This README provides an overview and documentation for the `ProtoRandomNFT` smart contract. The `ProtoRandomNFT` contract is designed to mint NFTs with randomized properties using Chainlink VRF (Verifiable Random Function). Users can request NFTs, and the properties of the NFTs are determined based on random values generated by Chainlink's VRF.

## Contract Overview

### SPDX-License-Identifier
This contract specifies that it is not licensed (UNLICENSED).

### Prerequisites
- Solidity version 0.7.0 to 0.9.0 is required.

### Dependencies
The contract imports several dependencies, including:
- `ERC721URIStorage` from OpenZeppelin for managing NFTs.
- `Ownable` from OpenZeppelin for setting contract ownership.
- `VRFConsumerBaseV2` from Chainlink for interfacing with Chainlink's VRF.
- `VRFCoordinatorV2Interface` from Chainlink for interacting with the VRF coordinator.

### Errors
The contract defines custom errors to handle various exceptional conditions:
- `ProtoRandomNFT_AllreadyInitialized`: Raised if contract initialization is attempted more than once.
- `ProtoRandomNFT_NeedMoreFunds`: Raised when there are insufficient funds for the randomness request.
- `ProtoRandomNFT_RangeOutOfBounds`: Raised when the random value falls outside the expected range.
- `ProtoRandomNFT_TransferFailed`: Raised when a fund transfer fails during a withdrawal.

### NFT Properties
The contract defines properties for the NFTs, including:
- `name`
- `description`
- `speed`
- `strength`
- `intelligence`

### Chainlink VRF
The contract utilizes Chainlink VRF to generate random values for NFT properties. It relies on several Chainlink-specific variables, including `vrfCoordinator`, `_suscriptionId`, `_gasLane`, `_callbackGasLimit`, `REQUEST_CONFIRMATIONS`, and `NUM_WORDS`.

### NFT Variables
- `tokenCounter`: A counter to keep track of the total number of minted NFTs.
- `nftTokenUrisStorage`: An array to store the URIs for NFT metadata.
- `isInitialized`: A flag to ensure contract initialization occurs only once.
- `requestIdToSenderMap`: A mapping to track the sender of randomness requests.

## Contract Functions

### Constructor
The constructor initializes the contract and Chainlink VRF parameters. It also initializes the contract with NFT URIs.

### `requestNft()`
This function allows users to request the minting of a random NFT. It sends a request to Chainlink VRF for random words and associates the request with the sender's address.

### `fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)`
This internal function is called by Chainlink VRF to fulfill the random words request. It mints a new NFT with randomized properties based on the received random words.

### `getChanceArray()`
Returns an array of probabilities for each NFT property to be chosen based on a modded random value.

### `_initializeContract(string[3] memory nftTokenUris)`
This private function initializes the contract with NFT URIs. It can only be called once, preventing reinitialization.

### `getPropsFromModdedRng(uint256 moddedRng)`

Given a modded random value, this function determines the NFT property to be assigned based on probability distributions.

### `withdraw()`
Allows the contract owner to withdraw funds from the contract. This function should be used to retrieve accumulated funds.

### `getNftTokenUris(uint256 index)`
Returns the URI for the NFT metadata at the specified index in the `nftTokenUrisStorage` array.

### `getInitialized()`
Returns a boolean indicating whether the contract has been initialized.

### `getTokenCounter()`
Returns the current token counter, indicating the total number of minted NFTs.



## License
This contract is not licensed, and its usage is at the discretion of the deploying entity.

## Usage
This Contract was deployed to sepolia testnet via the following commands

- RUN `cd src`
- RUN `npx hardhat compile`
- RUN `npx hardhat run scripts/uploadNFTToIPFS.ts --network sepolia`
- RUN `npx hardhat run scripts/deployRandomNFTProto.ts --network sepolia`

#### Verifying the tokens
- RUN `npx hardhat verify --contract contracts/RandomNFTProto.sol:ProtoRandomNFT  --network sepolia 0x885b2F2C61774d09067071a088798170609FFFEB` to verify the ProtoRandomNFT
- verification url: [nftProto url]()


#### Mint the nft with the contract to sepolia testnet
- RUN `npx hardhat run scripts/mintNFT.ts --network sepolia`

#### Interact the nft with the contract to sepolia testnet
- RUN `npx hardhat run scripts/interact.ts --network sepolia`

#### Find the minted nft here
[minted nft on opensea testnet]()

#### For a list of available gas lanes on each network,
- see [supported networks on chain-link](https://docs.chain.link/docs/vrf/v2/subscription/supported-networks/#configurations)

Request testnet LINK and ETH here: [get link faucets](https://faucets.chain.link/)
Find information on LINK Token Contracts and get the latest ETH and LINK faucets here: [link faucets docs](https://docs.chain.link/docs/link-token-contracts/)
